<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="incidence2">
<title>incidence2 • incidence2</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="incidence2">
<meta property="og:description" content="incidence2">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">incidence2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">2.2.3</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/incidence2.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/reconverse/incidence2/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>incidence2</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/reconverse/incidence2/blob/HEAD/vignettes/incidence2.Rmd" class="external-link"><code>vignettes/incidence2.Rmd</code></a></small>
      <div class="d-none name"><code>incidence2.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="what-does-it-do">What does it do?<a class="anchor" aria-label="anchor" href="#what-does-it-do"></a>
</h2>
<p>{incidence2} is an R package that implements functions to compute,
handle and visualise <em>incidence</em> data. It aims to be intuitive to
use for both interactive data exploration and as part of more robust
outbreak analytic pipelines.</p>
<p>The package is based around objects of the namesake class,
<code>&lt;incidence2&gt;</code>. These objects are a data frame subclass
with some additional invariants. That is, an
<code>&lt;incidence2&gt;</code> object must:</p>
<ul>
<li><p>have one column representing the date index (this does not need
to be a <code>date</code> object but must have an inherent ordering over
time);</p></li>
<li><p>have one column representing the count variable (i.e. what is
being counted) and one variable representing the associated
count;</p></li>
<li><p>have zero or more columns representing groups;</p></li>
<li><p>not have duplicated rows with regards to the date and group
variables.</p></li>
</ul>
<p>To create and work with <code>&lt;incidence2&gt;</code> objects we
provide a number of functions:</p>
<ul>
<li><p><code><a href="../reference/incidence.html">incidence()</a></code>: for the construction of incidence
objects from both linelists and pre-aggregated data sets.</p></li>
<li><p><code><a href="../reference/plot.incidence2.html">plot.incidence2()</a></code>: generate simple plots with
reasonable defaults.</p></li>
<li><p><code><a href="../reference/regroup.html">regroup()</a></code>: regroup incidence from different groups
into one global incidence time series.</p></li>
<li><p><code><a href="../reference/keep.html">keep_first()</a></code>, <code><a href="../reference/keep.html">keep_last()</a></code>: keep the
rows corresponding to the first (or last) set of grouped dates (ordered
by time) from an <code>&lt;incidence&gt;</code> object.</p></li>
<li><p><code><a href="../reference/keep.html">keep_peaks()</a></code>: keep the rows corresponding to the
maximum count value for each grouping of an
<code>&lt;incidence&gt;</code> object.</p></li>
<li><p><code><a href="../reference/complete_dates.html">complete_dates()</a></code>: ensure every possible combination
of date and groupings is represented with a count.</p></li>
<li><p><code><a href="../reference/cumulate.html">cumulate()</a></code>: calculate the cumulative incidence over
time.</p></li>
<li><p><code><a href="../reference/print.incidence2.html">print.incidence2()</a></code> and
<code><a href="../reference/summary.incidence2.html">summary.incidence2()</a></code> methods.</p></li>
<li><p><code><a href="../reference/as.data.frame.incidence2.html">as.data.frame.incidence2()</a></code> conversion
method.</p></li>
<li><p>Accessor functions for accessing underlying variables:
<code><a href="../reference/accessors.html">get_date_index()</a></code>, <code><a href="../reference/accessors.html">get_count_variable()</a></code>,
<code><a href="../reference/accessors.html">get_count_value()</a></code>, <code><a href="../reference/accessors.html">get_groups()</a></code>,
<code><a href="../reference/accessors.html">get_count_value_name()</a></code>,
<code><a href="../reference/accessors.html">get_count_variable_name()</a></code>,
<code><a href="../reference/accessors.html">get_date_index_name()</a></code> and
<code><a href="../reference/accessors.html">get_group_names()</a></code>.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>The following sections give an overview of the package utilising two
different data sets. The first of these datasets comes from the <a href="https://cran.r-project.org/package=outbreaks" class="external-link">{outbreaks}</a>
package and is a synthetic linelist generated from a simulated Ebola
Virus Disease (EVD) outbreak. The second data set is available within
{incidence2} and represents a pre-aggregated time-series of Covid cases,
tests, hospitalisations, and deaths for UK regions that was obtained
using the <a href="https://CRAN.R-project.org/package=covidregionaldata" class="external-link">{covidregionaldata}</a>
package (extracted on 2021-06-03).</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/reconhub/outbreaks" class="external-link">outbreaks</a></span><span class="op">)</span>  <span class="co"># for the underlying data</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span>    <span class="co"># For custom plotting later</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://www.reconverse.org/incidence2/" class="external-link">incidence2</a></span><span class="op">)</span> </span>
<span><span class="co">#&gt; Loading required package: grates</span></span>
<span></span>
<span><span class="va">ebola</span> <span class="op">&lt;-</span> <span class="va">ebola_sim_clean</span><span class="op">$</span><span class="va">linelist</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">ebola</span><span class="op">)</span></span>
<span><span class="co">#&gt; 'data.frame':    5829 obs. of  11 variables:</span></span>
<span><span class="co">#&gt;  $ case_id                : chr  "d1fafd" "53371b" "f5c3d8" "6c286a" ...</span></span>
<span><span class="co">#&gt;  $ generation             : int  0 1 1 2 2 0 3 3 2 3 ...</span></span>
<span><span class="co">#&gt;  $ date_of_infection      : Date, format: NA "2014-04-09" ...</span></span>
<span><span class="co">#&gt;  $ date_of_onset          : Date, format: "2014-04-07" "2014-04-15" ...</span></span>
<span><span class="co">#&gt;  $ date_of_hospitalisation: Date, format: "2014-04-17" "2014-04-20" ...</span></span>
<span><span class="co">#&gt;  $ date_of_outcome        : Date, format: "2014-04-19" NA ...</span></span>
<span><span class="co">#&gt;  $ outcome                : Factor w/ 2 levels "Death","Recover": NA NA 2 1 2 NA 2 1 2 1 ...</span></span>
<span><span class="co">#&gt;  $ gender                 : Factor w/ 2 levels "f","m": 1 2 1 1 1 1 1 1 2 2 ...</span></span>
<span><span class="co">#&gt;  $ hospital               : Factor w/ 5 levels "Connaught Hospital",..: 2 1 3 NA 3 NA 1 4 3 5 ...</span></span>
<span><span class="co">#&gt;  $ lon                    : num  -13.2 -13.2 -13.2 -13.2 -13.2 ...</span></span>
<span><span class="co">#&gt;  $ lat                    : num  8.47 8.46 8.48 8.46 8.45 ...</span></span>
<span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="va">covidregionaldataUK</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">covid</span><span class="op">)</span></span>
<span><span class="co">#&gt; 'data.frame':    6370 obs. of  13 variables:</span></span>
<span><span class="co">#&gt;  $ date           : Date, format: "2020-01-30" "2020-01-30" ...</span></span>
<span><span class="co">#&gt;  $ region         : chr  "East Midlands" "East of England" "England" "London" ...</span></span>
<span><span class="co">#&gt;  $ region_code    : chr  "E12000004" "E12000006" "E92000001" "E12000007" ...</span></span>
<span><span class="co">#&gt;  $ cases_new      : num  NA NA 2 NA NA NA NA NA NA NA ...</span></span>
<span><span class="co">#&gt;  $ cases_total    : num  NA NA 2 NA NA NA NA NA NA NA ...</span></span>
<span><span class="co">#&gt;  $ deaths_new     : num  NA NA NA NA NA NA NA NA NA NA ...</span></span>
<span><span class="co">#&gt;  $ deaths_total   : num  NA NA NA NA NA NA NA NA NA NA ...</span></span>
<span><span class="co">#&gt;  $ recovered_new  : num  NA NA NA NA NA NA NA NA NA NA ...</span></span>
<span><span class="co">#&gt;  $ recovered_total: num  NA NA NA NA NA NA NA NA NA NA ...</span></span>
<span><span class="co">#&gt;  $ hosp_new       : num  NA NA NA NA NA NA NA NA NA NA ...</span></span>
<span><span class="co">#&gt;  $ hosp_total     : num  NA NA NA NA NA NA NA NA NA NA ...</span></span>
<span><span class="co">#&gt;  $ tested_new     : num  NA NA NA NA NA NA NA NA NA NA ...</span></span>
<span><span class="co">#&gt;  $ tested_total   : num  NA NA NA NA NA NA NA NA NA NA ...</span></span></code></pre></div>
<div class="section level3">
<h3 id="computing-incidence-from-a-linelist">Computing incidence from a linelist<a class="anchor" aria-label="anchor" href="#computing-incidence-from-a-linelist"></a>
</h3>
<p>To compute daily incidence we pass to <code><a href="../reference/incidence.html">incidence()</a></code> a
linelist of observation data. This input should be in the form of a data
frame and we must also pass the name of a variable in the data that we
can use to index the input. Note that whilst we we refer to this index
as the <code>date_index</code> there is no restriction on it’s type,
save it needing represent the relative time of an observation (i.e. it
has an ordering).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">daily</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/incidence.html">incidence</a></span><span class="op">(</span><span class="va">ebola</span>, date_index <span class="op">=</span> <span class="st">"date_of_onset"</span><span class="op">)</span></span>
<span><span class="va">daily</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># incidence:  367 x 3</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># count vars: date_of_onset</span></span></span>
<span><span class="co">#&gt;    date_index count_variable count</span></span>
<span><span class="co">#&gt;  <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2014-04-07 date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2014-04-15 date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2014-04-21 date_of_onset      2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2014-04-25 date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2014-04-26 date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2014-04-27 date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2014-05-01 date_of_onset      2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2014-05-03 date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2014-05-04 date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2014-05-05 date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 357 more rows</span></span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">daily</span><span class="op">)</span></span></code></pre></div>
<p><img src="incidence2_files/figure-html/unnamed-chunk-3-1.png" width="630" style="display: block; margin: auto;"></p>
<p>The daily data is quite noisy, so we may want to pre group dates
prior to calculating the incidence. One way to do this is to utilise
functions from the <a href="https://www.reconverse.org/grates/dev/" class="external-link">{grates}</a> package. Here
we use the <code><a href="http://www.reconverse.org/grates/reference/as_isoweek.html" class="external-link">as_isoweek()</a></code> function to convert the ‘date of
onset’ to an isoweek (a week starting on a Monday) before calculating
the incidence incidence:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># isoweek incidence</span></span>
<span><span class="va">weekly_ebola</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/transform.html" class="external-link">transform</a></span><span class="op">(</span><span class="va">ebola</span>, date_of_onset <span class="op">=</span> <span class="fu"><a href="http://www.reconverse.org/grates/reference/as_isoweek.html" class="external-link">as_isoweek</a></span><span class="op">(</span><span class="va">date_of_onset</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">inci</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/incidence.html">incidence</a></span><span class="op">(</span><span class="va">weekly_ebola</span>, date_index <span class="op">=</span> <span class="st">"date_of_onset"</span><span class="op">)</span></span>
<span><span class="va">inci</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># incidence:  56 x 3</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># count vars: date_of_onset</span></span></span>
<span><span class="co">#&gt;    date_index count_variable count</span></span>
<span><span class="co">#&gt;  <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;isowk&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2014-W15   date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2014-W16   date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2014-W17   date_of_onset      5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2014-W18   date_of_onset      4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2014-W19   date_of_onset     12</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2014-W20   date_of_onset     17</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2014-W21   date_of_onset     15</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2014-W22   date_of_onset     19</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2014-W23   date_of_onset     23</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2014-W24   date_of_onset     21</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 46 more rows</span></span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">inci</span>, border_colour <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span></span></code></pre></div>
<p><img src="incidence2_files/figure-html/unnamed-chunk-4-1.png" width="672" style="display: block; margin: auto;"></p>
<p>By grouping dates prior to calling <code><a href="../reference/incidence.html">incidence()</a></code> it makes
it clear to future readers of your code (including yourself) which
transformations are being applied to your input data. This grouping,
however, is such a common and useful operation that we have chosen to
integrate much of <a href="https://www.reconverse.org/grates/dev/" class="external-link">{grates}</a> functionality
directly in to incidence2. This integration is done via an
<code>interval</code> parameter in the <code><a href="../reference/incidence.html">incidence()</a></code> call.
This can take values:</p>
<ul>
<li>day or daily (mapping to <code>&lt;Date&gt;</code> objects);</li>
<li>week(s), isoweek(s) or weekly (mapping to
<code>&lt;grates_isoweek&gt;</code>);</li>
<li>epiweek(s) (mapping to <code>&lt;grates_epiweek&gt;</code>);</li>
<li>month(s), yearmonth(s) or monthly
(<code>&lt;grates_yearmonth&gt;</code>);</li>
<li>quarter(s), yearquarter(s) or quarterly
(<code>&lt;grates_yearquarter&gt;</code>);</li>
<li>year(s) or yearly (<code>&lt;grates_year&gt;</code>).</li>
</ul>
<p>As an example, the following is equivalent to the <code>inci</code>
output above:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># isoweek incidence using the interval parameter</span></span>
<span><span class="va">inci2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/incidence.html">incidence</a></span><span class="op">(</span><span class="va">ebola</span>, date_index <span class="op">=</span> <span class="st">"date_of_onset"</span>, interval <span class="op">=</span> <span class="st">"isoweek"</span><span class="op">)</span></span>
<span><span class="va">inci2</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># incidence:  56 x 3</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># count vars: date_of_onset</span></span></span>
<span><span class="co">#&gt;    date_index count_variable count</span></span>
<span><span class="co">#&gt;  <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;isowk&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2014-W15   date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2014-W16   date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2014-W17   date_of_onset      5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2014-W18   date_of_onset      4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2014-W19   date_of_onset     12</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2014-W20   date_of_onset     17</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2014-W21   date_of_onset     15</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2014-W22   date_of_onset     19</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2014-W23   date_of_onset     23</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2014-W24   date_of_onset     21</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 46 more rows</span></span></span>
<span></span>
<span><span class="co"># check equivalent</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="va">inci</span>, <span class="va">inci2</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>If we wish to aggregate by specified groups we can use the
<code>groups</code> argument. For instance, computing incidence by
gender:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">inci_by_gender</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/incidence.html">incidence</a></span><span class="op">(</span></span>
<span>    <span class="va">ebola</span>,</span>
<span>    date_index <span class="op">=</span> <span class="st">"date_of_onset"</span>,</span>
<span>    groups <span class="op">=</span> <span class="st">"gender"</span>,</span>
<span>    interval <span class="op">=</span> <span class="st">"isoweek"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">inci_by_gender</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># incidence:  109 x 4</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># count vars: date_of_onset</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># groups:     gender</span></span></span>
<span><span class="co">#&gt;    date_index gender count_variable count</span></span>
<span><span class="co">#&gt;  <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;isowk&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2014-W15   f      date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2014-W16   m      date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2014-W17   f      date_of_onset      4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2014-W17   m      date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2014-W18   f      date_of_onset      4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2014-W19   f      date_of_onset      9</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2014-W19   m      date_of_onset      3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2014-W20   f      date_of_onset      7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2014-W20   m      date_of_onset     10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2014-W21   f      date_of_onset      8</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 99 more rows</span></span></span></code></pre></div>
<p>For grouped data, the plot method will create a faceted plot across
groups unless a fill variable is specified:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">inci_by_gender</span>, border_colour <span class="op">=</span> <span class="st">"white"</span>, angle <span class="op">=</span> <span class="fl">45</span><span class="op">)</span></span></code></pre></div>
<p><img src="incidence2_files/figure-html/unnamed-chunk-7-1.png" width="672" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">inci_by_gender</span>, border_colour <span class="op">=</span> <span class="st">"white"</span>, angle <span class="op">=</span> <span class="fl">45</span>, fill <span class="op">=</span> <span class="st">"gender"</span><span class="op">)</span></span></code></pre></div>
<p><img src="incidence2_files/figure-html/unnamed-chunk-7-2.png" width="672" style="display: block; margin: auto;"></p>
<p><code><a href="../reference/incidence.html">incidence()</a></code> also supports multiple date inputs:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">grouped_inci</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/incidence.html">incidence</a></span><span class="op">(</span></span>
<span>    <span class="va">ebola</span>,</span>
<span>    date_index <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>        onset <span class="op">=</span> <span class="st">"date_of_onset"</span>,</span>
<span>        infection <span class="op">=</span> <span class="st">"date_of_infection"</span></span>
<span>    <span class="op">)</span>, </span>
<span>    interval <span class="op">=</span> <span class="st">"isoweek"</span>,</span>
<span>    groups <span class="op">=</span> <span class="st">"gender"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">grouped_inci</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># incidence:  218 x 4</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># count vars: infection, onset</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># groups:     gender</span></span></span>
<span><span class="co">#&gt;    date_index gender count_variable count</span></span>
<span><span class="co">#&gt;  <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;isowk&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2014-W12   f      infection          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2014-W15   f      onset              1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2014-W15   m      infection          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2014-W16   f      infection          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2014-W16   m      onset              1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2014-W17   f      infection          4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2014-W17   f      onset              4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2014-W17   m      onset              1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2014-W18   f      infection          7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2014-W18   f      onset              4</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 208 more rows</span></span></span></code></pre></div>
<p>When multiple date indices are given, they are used for rows of the
resultant plot, unless the resultant variable is used to fill:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">grouped_inci</span>, angle <span class="op">=</span> <span class="fl">45</span>, border_colour <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span></span></code></pre></div>
<p><img src="incidence2_files/figure-html/unnamed-chunk-9-1.png" width="672" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">grouped_inci</span>, angle <span class="op">=</span> <span class="fl">45</span>, border_colour <span class="op">=</span> <span class="st">"white"</span>, fill <span class="op">=</span> <span class="st">"count_variable"</span><span class="op">)</span></span></code></pre></div>
<p><img src="incidence2_files/figure-html/unnamed-chunk-9-2.png" width="672" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="computing-incidence-from-pre-aggregated-data">Computing incidence from pre-aggregated data<a class="anchor" aria-label="anchor" href="#computing-incidence-from-pre-aggregated-data"></a>
</h3>
<p>The Covid data set is in a wide format with multiple count values
given for each day. To convert this to long form incidence we specify
similar variables to before but also include the count variables we are
interested in:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">monthly_covid</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">covid</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="op">!</span><span class="va">region</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"England"</span>, <span class="st">"Scotland"</span>, <span class="st">"Northern Ireland"</span>, <span class="st">"Wales"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="../reference/incidence.html">incidence</a></span><span class="op">(</span></span>
<span>        date_index <span class="op">=</span> <span class="st">"date"</span>,</span>
<span>        groups <span class="op">=</span> <span class="st">"region"</span>,</span>
<span>        counts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cases_new"</span><span class="op">)</span>,</span>
<span>        interval <span class="op">=</span> <span class="st">"yearmonth"</span></span>
<span>    <span class="op">)</span></span>
<span><span class="va">monthly_covid</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># incidence:  162 x 4</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># count vars: cases_new</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># groups:     region</span></span></span>
<span><span class="co">#&gt;    date_index region                   count_variable count</span></span>
<span><span class="co">#&gt;  <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;yrmon&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2020-Jan   East Midlands            cases_new         <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2020-Jan   East of England          cases_new         <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2020-Jan   London                   cases_new         <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2020-Jan   North East               cases_new         <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2020-Jan   North West               cases_new         <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2020-Jan   South East               cases_new         <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2020-Jan   South West               cases_new         <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2020-Jan   West Midlands            cases_new         <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2020-Jan   Yorkshire and The Humber cases_new          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2020-Feb   East Midlands            cases_new         <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 152 more rows</span></span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">monthly_covid</span>, nrow <span class="op">=</span> <span class="fl">3</span>, angle <span class="op">=</span> <span class="fl">45</span>, border_colour <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Removed 26 rows containing missing values (`position_stack()`).</span></span></code></pre></div>
<p><img src="incidence2_files/figure-html/unnamed-chunk-10-1.png" width="672" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="plotting-in-style-of-european-programme-for-intervention-epidemiology-training-epiet">Plotting in style of European Programme for Intervention
Epidemiology Training (EPIET)<a class="anchor" aria-label="anchor" href="#plotting-in-style-of-european-programme-for-intervention-epidemiology-training-epiet"></a>
</h3>
<p>For small datasets it is convention of EPIET to display individual
cases as rectangles. We can do this by setting
<code>show_cases = TRUE</code> in the call to <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> which
will display each case as an individual square with a white border.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">ebola</span><span class="op">[</span><span class="fl">160</span><span class="op">:</span><span class="fl">180</span>, <span class="op">]</span></span>
<span><span class="va">i_epiet</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/incidence.html">incidence</a></span><span class="op">(</span><span class="va">dat</span>, date_index <span class="op">=</span> <span class="st">"date_of_onset"</span>, date_names_to <span class="op">=</span> <span class="st">"date"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">i_epiet</span>, color <span class="op">=</span> <span class="st">"white"</span>, show_cases <span class="op">=</span> <span class="cn">TRUE</span>, angle <span class="op">=</span> <span class="fl">45</span>, n_breaks <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<p><img src="incidence2_files/figure-html/unnamed-chunk-11-1.png" width="672" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">i_epiet2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/incidence.html">incidence</a></span><span class="op">(</span></span>
<span>    <span class="va">dat</span>, date_index <span class="op">=</span> <span class="st">"date_of_onset"</span>,</span>
<span>    groups <span class="op">=</span> <span class="st">"gender"</span>, date_names_to <span class="op">=</span> <span class="st">"date"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span></span>
<span>    <span class="va">i_epiet2</span>, show_cases <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"white"</span>, angle <span class="op">=</span> <span class="fl">45</span>, n_breaks <span class="op">=</span> <span class="fl">10</span>, fill <span class="op">=</span> <span class="st">"gender"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="incidence2_files/figure-html/unnamed-chunk-11-2.png" width="672" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="modifying-incidence-objects">Modifying incidence objects<a class="anchor" aria-label="anchor" href="#modifying-incidence-objects"></a>
</h3>
<div class="section level4">
<h4 id="regroup">
<code>regroup()</code><a class="anchor" aria-label="anchor" href="#regroup"></a>
</h4>
<p>Sometimes you may find you’ve created a grouped incidence but now
want to change the internal grouping. Assuming you are after a subset of
the grouping already generated, you can use <code><a href="../reference/regroup.html">regroup()</a></code> to
get the desired aggregation:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># generate an incidence object with 3 groups</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/incidence.html">incidence</a></span><span class="op">(</span></span>
<span>    <span class="va">ebola</span>,</span>
<span>    date_index <span class="op">=</span> <span class="st">"date_of_onset"</span>,</span>
<span>    interval <span class="op">=</span> <span class="st">"isoweek"</span>,</span>
<span>    groups <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"gender"</span>, <span class="st">"hospital"</span>, <span class="st">"outcome"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># regroup to just one group</span></span>
<span><span class="va">xx</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/regroup.html">regroup</a></span><span class="op">(</span><span class="va">x</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"gender"</span>, <span class="st">"outcome"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">xx</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># incidence:  320 x 5</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># count vars: date_of_onset</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># groups:     gender, outcome</span></span></span>
<span><span class="co">#&gt;    date_index gender outcome count_variable count</span></span>
<span><span class="co">#&gt;  <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;isowk&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2014-W15   f      <span style="color: #BB0000;">NA</span>      date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2014-W16   m      <span style="color: #BB0000;">NA</span>      date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2014-W17   f      <span style="color: #BB0000;">NA</span>      date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2014-W17   f      Death   date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2014-W17   f      Recover date_of_onset      2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2014-W17   m      Recover date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2014-W18   f      Death   date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2014-W18   f      Recover date_of_onset      3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2014-W19   f      <span style="color: #BB0000;">NA</span>      date_of_onset      4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2014-W19   f      Death   date_of_onset      2</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 310 more rows</span></span></span>
<span></span>
<span><span class="co"># drop all groups</span></span>
<span><span class="fu"><a href="../reference/regroup.html">regroup</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># incidence:  56 x 3</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># count vars: date_of_onset</span></span></span>
<span><span class="co">#&gt;    date_index count_variable count</span></span>
<span><span class="co">#&gt;  <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;isowk&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2014-W15   date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2014-W16   date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2014-W17   date_of_onset      5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2014-W18   date_of_onset      4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2014-W19   date_of_onset     12</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2014-W20   date_of_onset     17</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2014-W21   date_of_onset     15</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2014-W22   date_of_onset     19</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2014-W23   date_of_onset     23</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2014-W24   date_of_onset     21</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 46 more rows</span></span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="cumulate">
<code>cumulate()</code><a class="anchor" aria-label="anchor" href="#cumulate"></a>
</h4>
<p>We also provide a helper function, <code>cumulate</code>() to easily
generate cumulative incidences:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/regroup.html">regroup</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"hospital"</span><span class="op">)</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cumulate.html">cumulate</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span>
<span><span class="va">y</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># incidence:  315 x 4</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># count vars: date_of_onset</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># groups:     hospital</span></span></span>
<span><span class="co">#&gt;    date_index hospital count_variable cumulative_count</span></span>
<span><span class="co">#&gt;  <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;isowk&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2014-W17   <span style="color: #BB0000;">NA</span>       date_of_onset                 2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2014-W18   <span style="color: #BB0000;">NA</span>       date_of_onset                 3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2014-W19   <span style="color: #BB0000;">NA</span>       date_of_onset                 4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2014-W20   <span style="color: #BB0000;">NA</span>       date_of_onset                 8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2014-W21   <span style="color: #BB0000;">NA</span>       date_of_onset                12</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2014-W22   <span style="color: #BB0000;">NA</span>       date_of_onset                16</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2014-W23   <span style="color: #BB0000;">NA</span>       date_of_onset                26</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2014-W24   <span style="color: #BB0000;">NA</span>       date_of_onset                34</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2014-W25   <span style="color: #BB0000;">NA</span>       date_of_onset                42</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2014-W26   <span style="color: #BB0000;">NA</span>       date_of_onset                51</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 305 more rows</span></span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">y</span>, angle <span class="op">=</span> <span class="fl">45</span>, nrow <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p><img src="incidence2_files/figure-html/unnamed-chunk-13-1.png" width="672" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level3">
<h3 id="subsetting-and-other-manipulations">subsetting and other manipulations<a class="anchor" aria-label="anchor" href="#subsetting-and-other-manipulations"></a>
</h3>
<div class="section level4">
<h4 id="keep_first-keep_last-and-keep_peaks">
<code>keep_first()</code>, <code>keep_last()</code> and
<code>keep_peaks()</code><a class="anchor" aria-label="anchor" href="#keep_first-keep_last-and-keep_peaks"></a>
</h4>
<p>Once your data is grouped by date, you may want to select the first
or last few entries based on a particular date grouping using
<code><a href="../reference/keep.html">keep_first()</a></code> and <code><a href="../reference/keep.html">keep_last()</a></code>:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">inci</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/incidence.html">incidence</a></span><span class="op">(</span></span>
<span>    <span class="va">ebola</span>,</span>
<span>    date_index <span class="op">=</span> <span class="st">"date_of_onset"</span>,</span>
<span>    interval <span class="op">=</span> <span class="st">"isoweek"</span>,</span>
<span>    groups <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"hospital"</span>, <span class="st">"gender"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/keep.html">keep_first</a></span><span class="op">(</span><span class="va">inci</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># incidence:  36 x 5</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># count vars: date_of_onset</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># groups:     hospital, gender</span></span></span>
<span><span class="co">#&gt;    date_index hospital           gender count_variable count</span></span>
<span><span class="co">#&gt;  <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;isowk&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2014-W15   <span style="color: #BB0000;">NA</span>                 f      date_of_onset      0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2014-W16   <span style="color: #BB0000;">NA</span>                 f      date_of_onset      0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2014-W17   <span style="color: #BB0000;">NA</span>                 f      date_of_onset      2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2014-W15   <span style="color: #BB0000;">NA</span>                 m      date_of_onset      0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2014-W16   <span style="color: #BB0000;">NA</span>                 m      date_of_onset      0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2014-W17   <span style="color: #BB0000;">NA</span>                 m      date_of_onset      0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2014-W15   Connaught Hospital f      date_of_onset      0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2014-W16   Connaught Hospital f      date_of_onset      0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2014-W17   Connaught Hospital f      date_of_onset      0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2014-W15   Connaught Hospital m      date_of_onset      0</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 26 more rows</span></span></span>
<span><span class="fu"><a href="../reference/keep.html">keep_last</a></span><span class="op">(</span><span class="va">inci</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># incidence:  36 x 5</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># count vars: date_of_onset</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># groups:     hospital, gender</span></span></span>
<span><span class="co">#&gt;    date_index hospital           gender count_variable count</span></span>
<span><span class="co">#&gt;  <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;isowk&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2015-W16   <span style="color: #BB0000;">NA</span>                 f      date_of_onset      9</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2015-W17   <span style="color: #BB0000;">NA</span>                 f      date_of_onset      4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2015-W18   <span style="color: #BB0000;">NA</span>                 f      date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2015-W16   <span style="color: #BB0000;">NA</span>                 m      date_of_onset      5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2015-W17   <span style="color: #BB0000;">NA</span>                 m      date_of_onset      8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2015-W18   <span style="color: #BB0000;">NA</span>                 m      date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2015-W16   Connaught Hospital f      date_of_onset      9</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2015-W17   Connaught Hospital f      date_of_onset      5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2015-W18   Connaught Hospital f      date_of_onset      7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2015-W16   Connaught Hospital m      date_of_onset      5</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 26 more rows</span></span></span></code></pre></div>
<p>Similarly you may want to quickly view the incidence peaks:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/keep.html">keep_peaks</a></span><span class="op">(</span><span class="va">inci</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># incidence:  14 x 5</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># count vars: date_of_onset</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># groups:     hospital, gender</span></span></span>
<span><span class="co">#&gt;    date_index hospital                               gender count_variable count</span></span>
<span><span class="co">#&gt;  <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;isowk&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                                  <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2014-W38   <span style="color: #BB0000;">NA</span>                                     f      date_of_onset     46</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2014-W40   <span style="color: #BB0000;">NA</span>                                     m      date_of_onset     41</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2014-W39   Connaught Hospital                     f      date_of_onset     57</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2014-W38   Connaught Hospital                     m      date_of_onset     48</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2014-W38   Military Hospital                      f      date_of_onset     26</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2014-W38   Military Hospital                      m      date_of_onset     28</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2014-W42   other                                  f      date_of_onset     32</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2014-W38   other                                  m      date_of_onset     26</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2014-W38   Princess Christian Maternity Hospital… f      date_of_onset     13</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2014-W40   Princess Christian Maternity Hospital… f      date_of_onset     13</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> 2014-W38   Princess Christian Maternity Hospital… m      date_of_onset     12</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> 2014-W42   Rokupa Hospital                        f      date_of_onset     15</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> 2014-W40   Rokupa Hospital                        m      date_of_onset     17</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> 2014-W44   Rokupa Hospital                        m      date_of_onset     17</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="complete_dates">
<code>complete_dates()</code><a class="anchor" aria-label="anchor" href="#complete_dates"></a>
</h4>
<p>Sometimes your incidence data does not span consecutive units of
time, or different groupings may cover different periods. To this end we
provide a <code><a href="../reference/complete_dates.html">complete_dates()</a></code> function which ensures a
complete and identical range of dates are given counts (by default
filling with a 0 value).</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    dates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2020-01-01"</span>, <span class="st">"2020-01-04"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    gender <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"male"</span>, <span class="st">"female"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">i</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/incidence.html">incidence</a></span><span class="op">(</span><span class="va">dat</span>, date_index <span class="op">=</span> <span class="st">"dates"</span>, groups <span class="op">=</span> <span class="st">"gender"</span><span class="op">)</span></span>
<span><span class="va">i</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># incidence:  2 x 4</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># count vars: dates</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># groups:     gender</span></span></span>
<span><span class="co">#&gt;   date_index gender count_variable count</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2020-01-01 male   dates              1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2020-01-04 female dates              1</span></span>
<span><span class="fu"><a href="../reference/complete_dates.html">complete_dates</a></span><span class="op">(</span><span class="va">i</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># incidence:  8 x 4</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># count vars: dates</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># groups:     gender</span></span></span>
<span><span class="co">#&gt;   date_index gender count_variable count</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2020-01-01 female dates              0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2020-01-01 male   dates              1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2020-01-02 female dates              0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2020-01-02 male   dates              0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2020-01-03 female dates              0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 2020-01-03 male   dates              0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> 2020-01-04 female dates              1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">8</span> 2020-01-04 male   dates              0</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="preservation-of-class">preservation of class<a class="anchor" aria-label="anchor" href="#preservation-of-class"></a>
</h4>
<p><code>&lt;incidence2&gt;</code> objects have been carefully
constructed to preserve their structure under a range of different
operations that can be applied to data frames. By this we mean that if
an operation is applied to an <code>&lt;incidence2&gt;</code> object
then as long as the invariants of the object are preserved (i.e. groups,
interval and uniqueness of rows) then the object retain it’s incidence
class. If the invariants are not preserved then a
<code>&lt;data.frame&gt;</code> will be returned instead.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># filtering preserves class</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">inci</span>, <span class="va">gender</span> <span class="op">==</span> <span class="st">"f"</span> <span class="op">&amp;</span> <span class="va">hospital</span> <span class="op">==</span> <span class="st">"Rokupa Hospital"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># incidence:  48 x 5</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># count vars: date_of_onset</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># groups:     hospital, gender</span></span></span>
<span><span class="co">#&gt;    date_index hospital        gender count_variable count</span></span>
<span><span class="co">#&gt;  <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;isowk&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2014-W18   Rokupa Hospital f      date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2014-W20   Rokupa Hospital f      date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2014-W22   Rokupa Hospital f      date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2014-W23   Rokupa Hospital f      date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2014-W25   Rokupa Hospital f      date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2014-W27   Rokupa Hospital f      date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2014-W28   Rokupa Hospital f      date_of_onset      4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2014-W29   Rokupa Hospital f      date_of_onset      2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2014-W30   Rokupa Hospital f      date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2014-W31   Rokupa Hospital f      date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 38 more rows</span></span></span>
<span><span class="va">inci</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">3L</span>, <span class="fl">5L</span><span class="op">)</span>, <span class="op">]</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># incidence:  3 x 5</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># count vars: date_of_onset</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># groups:     hospital, gender</span></span></span>
<span><span class="co">#&gt;   date_index hospital          gender count_variable count</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;isowk&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2014-W15   Military Hospital f      date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2014-W17   <span style="color: #BB0000;">NA</span>                f      date_of_onset      2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2014-W17   other             m      date_of_onset      1</span></span>
<span></span>
<span><span class="co"># Adding columns preserve class</span></span>
<span><span class="va">inci</span><span class="op">$</span><span class="va">future</span> <span class="op">&lt;-</span> <span class="va">inci</span><span class="op">$</span><span class="va">date_index</span> <span class="op">+</span> <span class="fl">999L</span></span>
<span><span class="va">inci</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># incidence:  601 x 6</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># count vars: date_of_onset</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># groups:     hospital, gender</span></span></span>
<span><span class="co">#&gt;    date_index hospital                        gender count_variable count future</span></span>
<span><span class="co">#&gt;  <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;isowk&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                           <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;isow&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2014-W15   Military Hospital               f      date_of_onset      1 2033-…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2014-W16   Connaught Hospital              m      date_of_onset      1 2033-…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2014-W17   <span style="color: #BB0000;">NA</span>                              f      date_of_onset      2 2033-…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2014-W17   other                           f      date_of_onset      2 2033-…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2014-W17   other                           m      date_of_onset      1 2033-…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2014-W18   <span style="color: #BB0000;">NA</span>                              f      date_of_onset      1 2033-…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2014-W18   Connaught Hospital              f      date_of_onset      1 2033-…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2014-W18   Princess Christian Maternity H… f      date_of_onset      1 2033-…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2014-W18   Rokupa Hospital                 f      date_of_onset      1 2033-…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2014-W19   <span style="color: #BB0000;">NA</span>                              f      date_of_onset      1 2033-…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 591 more rows</span></span></span>
<span></span>
<span><span class="co"># rename preserve class</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">inci</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">inci</span><span class="op">)</span> <span class="op">==</span> <span class="st">"date_index"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"isoweek"</span></span>
<span><span class="va">inci</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># incidence:  601 x 6</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># count vars: date_of_onset</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># groups:     hospital, gender</span></span></span>
<span><span class="co">#&gt;    isoweek  hospital                          gender count_variable count future</span></span>
<span><span class="co">#&gt;  <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;isowk&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                             <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;isow&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2014-W15 Military Hospital                 f      date_of_onset      1 2033-…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2014-W16 Connaught Hospital                m      date_of_onset      1 2033-…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2014-W17 <span style="color: #BB0000;">NA</span>                                f      date_of_onset      2 2033-…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2014-W17 other                             f      date_of_onset      2 2033-…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2014-W17 other                             m      date_of_onset      1 2033-…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2014-W18 <span style="color: #BB0000;">NA</span>                                f      date_of_onset      1 2033-…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2014-W18 Connaught Hospital                f      date_of_onset      1 2033-…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2014-W18 Princess Christian Maternity Hos… f      date_of_onset      1 2033-…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2014-W18 Rokupa Hospital                   f      date_of_onset      1 2033-…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2014-W19 <span style="color: #BB0000;">NA</span>                                f      date_of_onset      1 2033-…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 591 more rows</span></span></span>
<span></span>
<span><span class="co"># select returns a data frame unless all date, count and group variables are</span></span>
<span><span class="co"># preserved in the output</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">inci</span><span class="op">[</span>,<span class="op">-</span><span class="fl">1L</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; 'data.frame':    601 obs. of  5 variables:</span></span>
<span><span class="co">#&gt;  $ hospital      : Factor w/ 5 levels "Connaught Hospital",..: 2 1 NA 3 3 NA 1 4 5 NA ...</span></span>
<span><span class="co">#&gt;  $ gender        : Factor w/ 2 levels "f","m": 1 2 1 1 2 1 1 1 1 1 ...</span></span>
<span><span class="co">#&gt;  $ count_variable: chr  "date_of_onset" "date_of_onset" "date_of_onset" "date_of_onset" ...</span></span>
<span><span class="co">#&gt;  $ count         : int  1 1 2 2 1 1 1 1 1 1 ...</span></span>
<span><span class="co">#&gt;  $ future        : 'grates_isoweek' int  2033-W22 2033-W23 2033-W24 2033-W24 2033-W24 2033-W25 2033-W25 2033-W25 2033-W25 2033-W26 ...</span></span>
<span><span class="va">inci</span><span class="op">[</span>, <span class="op">-</span><span class="fl">6L</span><span class="op">]</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># incidence:  601 x 5</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># count vars: date_of_onset</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># groups:     hospital, gender</span></span></span>
<span><span class="co">#&gt;    isoweek  hospital                                 gender count_variable count</span></span>
<span><span class="co">#&gt;  <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;isowk&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                                    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2014-W15 Military Hospital                        f      date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2014-W16 Connaught Hospital                       m      date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2014-W17 <span style="color: #BB0000;">NA</span>                                       f      date_of_onset      2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2014-W17 other                                    f      date_of_onset      2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2014-W17 other                                    m      date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2014-W18 <span style="color: #BB0000;">NA</span>                                       f      date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2014-W18 Connaught Hospital                       f      date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2014-W18 Princess Christian Maternity Hospital (… f      date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2014-W18 Rokupa Hospital                          f      date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2014-W19 <span style="color: #BB0000;">NA</span>                                       f      date_of_onset      1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 591 more rows</span></span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="accessing-variable-information">Accessing variable information<a class="anchor" aria-label="anchor" href="#accessing-variable-information"></a>
</h3>
<p>We provide multiple accessors to easily access information about an
<code>&lt;incidence2&gt;</code> object’s structure:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># the name of the date_index variable of x</span></span>
<span><span class="fu"><a href="../reference/accessors.html">get_date_index_name</a></span><span class="op">(</span><span class="va">inci</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "isoweek"</span></span>
<span></span>
<span><span class="co"># alias for `get_date_index_name()`</span></span>
<span><span class="fu"><a href="../reference/accessors.html">get_dates_name</a></span><span class="op">(</span><span class="va">inci</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "isoweek"</span></span>
<span></span>
<span><span class="co"># the name of the count variable of x</span></span>
<span><span class="fu"><a href="../reference/accessors.html">get_count_variable_name</a></span><span class="op">(</span><span class="va">inci</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "count_variable"</span></span>
<span></span>
<span><span class="co"># the name of the count value of x</span></span>
<span><span class="fu"><a href="../reference/accessors.html">get_count_value_name</a></span><span class="op">(</span><span class="va">inci</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "count"</span></span>
<span></span>
<span><span class="co"># the name(s) of the group variable(s) of x</span></span>
<span><span class="fu"><a href="../reference/accessors.html">get_group_names</a></span><span class="op">(</span><span class="va">inci</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "hospital" "gender"</span></span>
<span></span>
<span><span class="co"># list containing date_index variable of x</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu"><a href="../reference/accessors.html">get_date_index</a></span><span class="op">(</span><span class="va">inci</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;  'grates_isoweek' int [1:601] 2014-W15 2014-W16 2014-W17 2014-W17 2014-W17 2014-W18 2014-W18 2014-W18 2014-W18 2014-W19 ...</span></span>
<span></span>
<span><span class="co"># alias for get_date_index</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu"><a href="../reference/accessors.html">get_dates</a></span><span class="op">(</span><span class="va">inci</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;  'grates_isoweek' int [1:601] 2014-W15 2014-W16 2014-W17 2014-W17 2014-W17 2014-W18 2014-W18 2014-W18 2014-W18 2014-W19 ...</span></span>
<span></span>
<span><span class="co"># list containing the count variable of x</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu"><a href="../reference/accessors.html">get_count_variable</a></span><span class="op">(</span><span class="va">inci</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;  chr [1:601] "date_of_onset" "date_of_onset" "date_of_onset" ...</span></span>
<span></span>
<span><span class="co"># list containing count value of x</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu"><a href="../reference/accessors.html">get_count_value</a></span><span class="op">(</span><span class="va">inci</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;  int [1:601] 1 1 2 2 1 1 1 1 1 1 ...</span></span>
<span></span>
<span><span class="co"># list of the group variable(s) of x</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu"><a href="../reference/accessors.html">get_groups</a></span><span class="op">(</span><span class="va">inci</span><span class="op">)</span><span class="op">)</span> </span>
<span><span class="co">#&gt; List of 2</span></span>
<span><span class="co">#&gt;  $ hospital: Factor w/ 5 levels "Connaught Hospital",..: 2 1 NA 3 3 NA 1 4 5 NA ...</span></span>
<span><span class="co">#&gt;  $ gender  : Factor w/ 2 levels "f","m": 1 2 1 1 2 1 1 1 1 1 ...</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Tim Taylor.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
