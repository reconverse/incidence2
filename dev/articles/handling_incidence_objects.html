<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="incidence2">
<title>Handling incidence objects • incidence2</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Handling incidence objects">
<meta property="og:description" content="incidence2">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">incidence2</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.2.3.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Using the incidence2 package</h6>
    <a class="dropdown-item" href="../articles/Introduction.html">Introduction</a>
    <a class="dropdown-item" href="../articles/handling_incidence_objects.html">Handling incidence objects</a>
    <a class="dropdown-item" href="../articles/customizing_incidence_plots.html">Customizing incidence plots</a>
    <a class="dropdown-item" href="../articles/Alternative_date_groupings.html">Alternative date groupings</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/reconverse/incidence2">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Handling incidence objects</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/reconverse/incidence2/blob/HEAD/vignettes/handling_incidence_objects.Rmd" class="external-link"><code>vignettes/handling_incidence_objects.Rmd</code></a></small>
      <div class="d-none name"><code>handling_incidence_objects.Rmd</code></div>
    </div>

    
    
<p><code><a href="../reference/incidence.html">incidence()</a></code> objects are easy to work with, and we
providing helper functions for both manipulating and accessing the
underlying data and attributes. As <code><a href="../reference/incidence.html">incidence()</a></code> objects are
subclasses of <a href="https://tibble.tidyverse.org/" class="external-link">tibbles</a> they
also have good integration with <a href="https://www.tidyverse.org/" class="external-link">tidyverse</a> verbs.</p>
<div class="section level3">
<h3 id="modifying-incidence-objects">Modifying incidence objects<a class="anchor" aria-label="anchor" href="#modifying-incidence-objects"></a>
</h3>
<div class="section level4">
<h4 id="regroup">
<code>regroup()</code><a class="anchor" aria-label="anchor" href="#regroup"></a>
</h4>
<p>Sometimes you may find you’ve created a grouped incidence but now
want to change the internal grouping. Assuming you are after a subset of
the grouping already generated, then you can use to
<code><a href="../reference/regroup.html">regroup()</a></code> function to get the desired aggregation:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/reconhub/outbreaks" class="external-link">outbreaks</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/reconverse/incidence2" class="external-link">incidence2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load data</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">ebola_sim_clean</span><span class="op">$</span><span class="va">linelist</span></span>
<span></span>
<span><span class="co"># generate the incidence object with 3 groups</span></span>
<span><span class="va">inci</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/incidence.html">incidence</a></span><span class="op">(</span><span class="va">dat</span>, <span class="va">date_of_onset</span>, groups <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">gender</span>, <span class="va">hospital</span>, <span class="va">outcome</span><span class="op">)</span>, interval <span class="op">=</span> <span class="st">"week"</span><span class="op">)</span></span>
<span><span class="va">inci</span></span>
<span><span class="co">#&gt; <span style="color: #949494;">An incidence object: 1,448 x 5</span></span></span>
<span><span class="co">#&gt; date range: [2014-W15] to [2015-W18]</span></span>
<span><span class="co">#&gt; cases: 5829</span></span>
<span><span class="co">#&gt; interval: 1 (Monday) week </span></span>
<span><span class="co">#&gt; cumulative: FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    date_index gender hospital                                     outcome count</span></span>
<span><span class="co">#&gt;        <span style="color: #949494; font-style: italic;">&lt;yrwk&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                                        <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>   2014-W15 f      Military Hospital                            <span style="color: #BB0000;">NA</span>          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>   2014-W16 m      Connaught Hospital                           <span style="color: #BB0000;">NA</span>          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>   2014-W17 f      <span style="color: #BB0000;">NA</span>                                           <span style="color: #BB0000;">NA</span>          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>   2014-W17 f      <span style="color: #BB0000;">NA</span>                                           Death       1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>   2014-W17 f      other                                        Recover     2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>   2014-W17 m      other                                        Recover     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>   2014-W18 f      <span style="color: #BB0000;">NA</span>                                           Recover     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>   2014-W18 f      Connaught Hospital                           Recover     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>   2014-W18 f      Princess Christian Maternity Hospital (PCMH) Death       1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>   2014-W18 f      Rokupa Hospital                              Recover     1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 1,438 more rows</span></span></span>
<span></span>
<span><span class="co"># regroup to just two groups</span></span>
<span><span class="va">inci</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/regroup.html">regroup</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">gender</span>, <span class="va">outcome</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;">An incidence object: 320 x 4</span></span></span>
<span><span class="co">#&gt; date range: [2014-W15] to [2015-W18]</span></span>
<span><span class="co">#&gt; cases: 5829</span></span>
<span><span class="co">#&gt; interval: 1 (Monday) week </span></span>
<span><span class="co">#&gt; cumulative: FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    date_index gender outcome count</span></span>
<span><span class="co">#&gt;        <span style="color: #949494; font-style: italic;">&lt;yrwk&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>   2014-W15 f      <span style="color: #BB0000;">NA</span>          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>   2014-W16 m      <span style="color: #BB0000;">NA</span>          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>   2014-W17 f      <span style="color: #BB0000;">NA</span>          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>   2014-W17 f      Death       1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>   2014-W17 f      Recover     2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>   2014-W17 m      Recover     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>   2014-W18 f      Death       1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>   2014-W18 f      Recover     3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>   2014-W19 f      <span style="color: #BB0000;">NA</span>          4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>   2014-W19 f      Death       2</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 310 more rows</span></span></span>
<span></span>
<span><span class="co"># drop all groups</span></span>
<span><span class="va">inci</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/regroup.html">regroup</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;">An incidence object: 56 x 2</span></span></span>
<span><span class="co">#&gt; date range: [2014-W15] to [2015-W18]</span></span>
<span><span class="co">#&gt; cases: 5829</span></span>
<span><span class="co">#&gt; interval: 1 (Monday) week </span></span>
<span><span class="co">#&gt; cumulative: FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    date_index count</span></span>
<span><span class="co">#&gt;        <span style="color: #949494; font-style: italic;">&lt;yrwk&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>   2014-W15     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>   2014-W16     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>   2014-W17     5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>   2014-W18     4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>   2014-W19    12</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>   2014-W20    17</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>   2014-W21    15</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>   2014-W22    19</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>   2014-W23    23</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>   2014-W24    21</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 46 more rows</span></span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="cumulate">cumulate<a class="anchor" aria-label="anchor" href="#cumulate"></a>
</h4>
<p>We also provide a helper function, <code>cumulate</code>() to easily
generate cumulative incidences:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">inci</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/regroup.html">regroup</a></span><span class="op">(</span><span class="va">hospital</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/cumulate.html">cumulate</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/plot.incidence2.html">facet_plot</a></span><span class="op">(</span>n_breaks <span class="op">=</span> <span class="fl">4</span>, nrow <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p><img src="handling_incidence_objects_files/figure-html/cumulate-1.png" width="672" style="display: block; margin: auto;"></p>
</div>
<div class="section level4">
<h4 id="keep_first-and-keep_last">
<code>keep_first()</code> and <code>keep_last()</code><a class="anchor" aria-label="anchor" href="#keep_first-and-keep_last"></a>
</h4>
<p>Once your data is grouped by date, you may want to select the first
or last few entries based on a particular date grouping using
<code><a href="../reference/keep.html">keep_first()</a></code> and <code><a href="../reference/keep.html">keep_last()</a></code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">inci</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/keep.html">keep_first</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;">An incidence object: 6 x 5</span></span></span>
<span><span class="co">#&gt; date range: [2014-W15] to [2014-W17]</span></span>
<span><span class="co">#&gt; cases: 7</span></span>
<span><span class="co">#&gt; interval: 1 (Monday) week </span></span>
<span><span class="co">#&gt; cumulative: FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   date_index gender hospital           outcome count</span></span>
<span><span class="co">#&gt;       <span style="color: #949494; font-style: italic;">&lt;yrwk&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>   2014-W15 f      Military Hospital  <span style="color: #BB0000;">NA</span>          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>   2014-W16 m      Connaught Hospital <span style="color: #BB0000;">NA</span>          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>   2014-W17 f      <span style="color: #BB0000;">NA</span>                 <span style="color: #BB0000;">NA</span>          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>   2014-W17 f      <span style="color: #BB0000;">NA</span>                 Death       1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>   2014-W17 f      other              Recover     2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>   2014-W17 m      other              Recover     1</span></span>
<span><span class="va">inci</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/keep.html">keep_last</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;">An incidence object: 63 x 5</span></span></span>
<span><span class="co">#&gt; date range: [2015-W16] to [2015-W18]</span></span>
<span><span class="co">#&gt; cases: 103</span></span>
<span><span class="co">#&gt; interval: 1 (Monday) week </span></span>
<span><span class="co">#&gt; cumulative: FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    date_index gender hospital           outcome count</span></span>
<span><span class="co">#&gt;        <span style="color: #949494; font-style: italic;">&lt;yrwk&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>   2015-W16 f      <span style="color: #BB0000;">NA</span>                 <span style="color: #BB0000;">NA</span>          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>   2015-W16 f      <span style="color: #BB0000;">NA</span>                 Death       7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>   2015-W16 f      <span style="color: #BB0000;">NA</span>                 Recover     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>   2015-W16 f      Connaught Hospital <span style="color: #BB0000;">NA</span>          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>   2015-W16 f      Connaught Hospital Death       5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>   2015-W16 f      Connaught Hospital Recover     3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>   2015-W16 f      Military Hospital  Recover     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>   2015-W16 f      other              <span style="color: #BB0000;">NA</span>          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>   2015-W16 f      other              Death       2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>   2015-W16 f      other              Recover     1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 53 more rows</span></span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="tidyverse-compatibility">Tidyverse compatibility<a class="anchor" aria-label="anchor" href="#tidyverse-compatibility"></a>
</h4>
<p>incidence2 has been written with <em>tidyverse</em> compatibility (in
particular <a href="https://dplyr.tidyverse.org/" class="external-link">dplyr</a>) at the
forefront of the design choices we have made. By this we mean that if an
operation from dplyr is applied to an incidence object then as long as
the invariants of the object are preserved (i.e. groups, interval and
uniqueness of rows) then the object returned will be an incidence
object. If the invariants are not preserved then a tibble will be
returned instead.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create incidence object</span></span>
<span><span class="va">inci</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/incidence.html">incidence</a></span><span class="op">(</span><span class="va">dat</span>, <span class="va">date_of_onset</span>, interval <span class="op">=</span> <span class="st">"week"</span>, groups <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">hospital</span>, <span class="va">gender</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># filtering preserves class</span></span>
<span><span class="va">inci</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">gender</span> <span class="op">==</span> <span class="st">"f"</span>, <span class="va">hospital</span> <span class="op">==</span> <span class="st">"Rokupa Hospital"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;">An incidence object: 48 x 4</span></span></span>
<span><span class="co">#&gt; date range: [2014-W18] to [2015-W18]</span></span>
<span><span class="co">#&gt; cases: 210</span></span>
<span><span class="co">#&gt; interval: 1 (Monday) week </span></span>
<span><span class="co">#&gt; cumulative: FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    date_index hospital        gender count</span></span>
<span><span class="co">#&gt;        <span style="color: #949494; font-style: italic;">&lt;yrwk&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>   2014-W18 Rokupa Hospital f          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>   2014-W20 Rokupa Hospital f          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>   2014-W22 Rokupa Hospital f          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>   2014-W23 Rokupa Hospital f          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>   2014-W25 Rokupa Hospital f          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>   2014-W27 Rokupa Hospital f          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>   2014-W28 Rokupa Hospital f          4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>   2014-W29 Rokupa Hospital f          2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>   2014-W30 Rokupa Hospital f          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>   2014-W31 Rokupa Hospital f          1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 38 more rows</span></span></span>
<span></span>
<span><span class="co"># slice operations preserve class</span></span>
<span><span class="va">inci</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_sample</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;">An incidence object: 10 x 4</span></span></span>
<span><span class="co">#&gt; date range: [2014-W32] to [2015-W16]</span></span>
<span><span class="co">#&gt; cases: 123</span></span>
<span><span class="co">#&gt; interval: 1 (Monday) week </span></span>
<span><span class="co">#&gt; cumulative: FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    date_index hospital           gender count</span></span>
<span><span class="co">#&gt;        <span style="color: #949494; font-style: italic;">&lt;yrwk&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>   2014-W49 other              m         11</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>   2015-W06 other              m          5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>   2014-W35 other              f          7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>   2014-W32 Connaught Hospital f         15</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>   2015-W11 Rokupa Hospital    f          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>   2014-W41 Military Hospital  m         20</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>   2015-W16 Connaught Hospital f          9</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>   2015-W03 Connaught Hospital f         16</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>   2014-W34 other              f         13</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>   2014-W38 other              m         26</span></span>
<span></span>
<span><span class="va">inci</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;">An incidence object: 3 x 4</span></span></span>
<span><span class="co">#&gt; date range: [2014-W15] to [2014-W19]</span></span>
<span><span class="co">#&gt; cases: 3</span></span>
<span><span class="co">#&gt; interval: 1 (Monday) week </span></span>
<span><span class="co">#&gt; cumulative: FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   date_index hospital          gender count</span></span>
<span><span class="co">#&gt;       <span style="color: #949494; font-style: italic;">&lt;yrwk&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>   2014-W15 Military Hospital f          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>   2014-W17 other             m          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>   2014-W19 <span style="color: #BB0000;">NA</span>                f          1</span></span>
<span></span>
<span><span class="co"># mutate preserve class</span></span>
<span><span class="va">inci</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>future <span class="op">=</span> <span class="va">date_index</span> <span class="op">+</span> <span class="fl">999</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;">An incidence object: 601 x 5</span></span></span>
<span><span class="co">#&gt; date range: [2014-W15] to [2015-W18]</span></span>
<span><span class="co">#&gt; cases: 5829</span></span>
<span><span class="co">#&gt; interval: 1 (Monday) week </span></span>
<span><span class="co">#&gt; cumulative: FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    date_index hospital                                     gender count   future</span></span>
<span><span class="co">#&gt;        <span style="color: #949494; font-style: italic;">&lt;yrwk&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                                        <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;yrwk&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>   2014-W15 Military Hospital                            f          1 2033-W22</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>   2014-W16 Connaught Hospital                           m          1 2033-W23</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>   2014-W17 <span style="color: #BB0000;">NA</span>                                           f          2 2033-W24</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>   2014-W17 other                                        f          2 2033-W24</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>   2014-W17 other                                        m          1 2033-W24</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>   2014-W18 <span style="color: #BB0000;">NA</span>                                           f          1 2033-W25</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>   2014-W18 Connaught Hospital                           f          1 2033-W25</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>   2014-W18 Princess Christian Maternity Hospital (PCMH) f          1 2033-W25</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>   2014-W18 Rokupa Hospital                              f          1 2033-W25</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>   2014-W19 <span style="color: #BB0000;">NA</span>                                           f          1 2033-W26</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 591 more rows</span></span></span>
<span></span>
<span><span class="co"># rename preserve class</span></span>
<span><span class="va">inci</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>left_bin <span class="op">=</span> <span class="va">date_index</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;">An incidence object: 601 x 4</span></span></span>
<span><span class="co">#&gt; date range: [2014-W15] to [2015-W18]</span></span>
<span><span class="co">#&gt; cases: 5829</span></span>
<span><span class="co">#&gt; interval: 1 (Monday) week </span></span>
<span><span class="co">#&gt; cumulative: FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    left_bin hospital                                     gender count</span></span>
<span><span class="co">#&gt;      <span style="color: #949494; font-style: italic;">&lt;yrwk&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                                        <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2014-W15 Military Hospital                            f          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2014-W16 Connaught Hospital                           m          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2014-W17 <span style="color: #BB0000;">NA</span>                                           f          2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2014-W17 other                                        f          2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2014-W17 other                                        m          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2014-W18 <span style="color: #BB0000;">NA</span>                                           f          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2014-W18 Connaught Hospital                           f          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2014-W18 Princess Christian Maternity Hospital (PCMH) f          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2014-W18 Rokupa Hospital                              f          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2014-W19 <span style="color: #BB0000;">NA</span>                                           f          1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 591 more rows</span></span></span>
<span></span>
<span><span class="co"># select returns a tibble unless all date, count and group variables are preserved</span></span>
<span><span class="va">inci</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 601 × 3</span></span></span>
<span><span class="co">#&gt;    hospital                                     gender count</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                                        <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Military Hospital                            f          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Connaught Hospital                           m          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> <span style="color: #BB0000;">NA</span>                                           f          2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> other                                        f          2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> other                                        m          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> <span style="color: #BB0000;">NA</span>                                           f          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Connaught Hospital                           f          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Princess Christian Maternity Hospital (PCMH) f          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Rokupa Hospital                              f          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> <span style="color: #BB0000;">NA</span>                                           f          1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 591 more rows</span></span></span>
<span></span>
<span><span class="va">inci</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;">An incidence object: 601 x 4</span></span></span>
<span><span class="co">#&gt; date range: [2014-W15] to [2015-W18]</span></span>
<span><span class="co">#&gt; cases: 5829</span></span>
<span><span class="co">#&gt; interval: 1 (Monday) week </span></span>
<span><span class="co">#&gt; cumulative: FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    date_index hospital                                     gender count</span></span>
<span><span class="co">#&gt;        <span style="color: #949494; font-style: italic;">&lt;yrwk&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                                        <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>   2014-W15 Military Hospital                            f          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>   2014-W16 Connaught Hospital                           m          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>   2014-W17 <span style="color: #BB0000;">NA</span>                                           f          2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>   2014-W17 other                                        f          2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>   2014-W17 other                                        m          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>   2014-W18 <span style="color: #BB0000;">NA</span>                                           f          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>   2014-W18 Connaught Hospital                           f          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>   2014-W18 Princess Christian Maternity Hospital (PCMH) f          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>   2014-W18 Rokupa Hospital                              f          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>   2014-W19 <span style="color: #BB0000;">NA</span>                                           f          1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 591 more rows</span></span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="accessing-variable-information">Accessing variable information<a class="anchor" aria-label="anchor" href="#accessing-variable-information"></a>
</h2>
<p>We provide multiple accessors to easily access information about an
<code><a href="../reference/incidence.html">incidence()</a></code> objects structure:</p>
<ul>
<li>
<code><a href="../reference/accessors.html">get_count_names()</a></code>, <code><a href="../reference/accessors.html">get_dates_name()</a></code>, and
<code><a href="../reference/accessors.html">get_group_names()</a></code> all return character vectors of the
column names corresponding to the requested variables.</li>
<li>
<code><a href="../reference/accessors.html">get_n()</a></code> returns the number of observations.</li>
<li>
<code><a href="../reference/accessors.html">get_interval()</a></code> returns the interval of the object.</li>
<li>
<code><a href="../reference/accessors.html">get_timespan()</a></code> returns the number of days the object
covers.</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Tim Taylor.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
