<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Compute, Handle and Plot Incidence of Dated Events • incidence2</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Compute, Handle and Plot Incidence of Dated Events">
<meta property="og:description" content="Provides functions and classes to compute, handle and visualise 
  incidence from dated events for a defined time interval. Dates can be 
  provided in various standard formats. The class incidence2 is used to store
  computed incidence and can be easily manipulated, subsetted, and plotted.
  This package is part of the RECON (&lt;https://www.repidemicsconsortium.org/&gt;) 
  toolkit for outbreak analysis (&lt;https://www.reconverse.org&gt;).">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">incidence2</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.2.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Using the incidence2 package</li>
    <li>
      <a href="articles/Introduction.html">Introduction</a>
    </li>
    <li>
      <a href="articles/handling_incidence_objects.html">Handling incidence objects</a>
    </li>
    <li>
      <a href="articles/customizing_incidence_plots.html">Customizing incidence plots</a>
    </li>
    <li>
      <a href="articles/Alternative_date_groupings.html">Alternative date groupings</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/reconverse/incidence2">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">


<div id="incidence2" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#incidence2" class="anchor"></a>incidence2</h1></div>
<p><strong>incidence2</strong> is an R package that implements functions and classes to compute, handle and visualise <em>incidence</em> from linelist data. It refocusses the scope of the original <a href="https://cran.r-project.org/package=incidence">incidence</a> package. Unlike the original package, <strong>incidence2</strong> concentrates only on the initial calculation, manipulation and plotting of the resultant <em>incidence</em> objects.</p>
<div id="installing-the-package" class="section level2">
<h2 class="hasAnchor">
<a href="#installing-the-package" class="anchor"></a>Installing the package</h2>
<p>The development version, which this documentation refers to, can be installed from <a href="https://github.com/">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="va"><a href="https://remotes.r-lib.org">remotes</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span>
<span class="op">}</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"reconverse/incidence2"</span>, build_vignettes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>You can install the current version of the package from the releases <a href="https://github.com/reconverse/incidence2/releases">page</a> or directly from <a href="https://cran.r-project.org/">CRAN</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"incidence2"</span><span class="op">)</span></code></pre></div>
</div>
<div id="resources" class="section level2">
<h2 class="hasAnchor">
<a href="#resources" class="anchor"></a>Resources</h2>
<div id="vignettes" class="section level3">
<h3 class="hasAnchor">
<a href="#vignettes" class="anchor"></a>Vignettes</h3>
<p>A short overview of <strong>incidence2</strong> is provided below in the worked example below. More detailed tutorials are distributed as vignettes with the package:</p>
<ul>
<li><code><a href="articles/Introduction.html">vignette("Introduction", package = "incidence2")</a></code></li>
<li><code><a href="articles/handling_incidence_objects.html">vignette("handling_incidence_objects", package = "incidence2")</a></code></li>
<li><code><a href="articles/customizing_incidence_plots.html">vignette("customizing_incidence_plots", package = "incidence2")</a></code></li>
<li><code><a href="articles/alternative_date_groupings.html">vignette("alternative_date_groupings", package = "incidence2")</a></code></li>
</ul>
</div>
</div>
<div id="getting-help-online" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-help-online" class="anchor"></a>Getting help online</h2>
<ul>
<li>Bug reports and feature requests should be posted on <em>github</em> using the issue system: <a href="https://github.com/reconverse/incidence2/issues" class="uri">https://github.com/reconverse/incidence2/issues</a>.</li>
<li>Online documentation: <a href="https://www.reconverse.org/incidence2" class="uri">https://www.reconverse.org/incidence2</a>.</li>
<li>All other questions should be posted on the <strong>RECON</strong> slack channel; see <a href="https://www.repidemicsconsortium.org/forum/" class="uri">https://www.repidemicsconsortium.org/forum/</a> for details on how to join.</li>
</ul>
</div>
</div>
<div id="a-quick-overview" class="section level1">
<h1 class="hasAnchor">
<a href="#a-quick-overview" class="anchor"></a>A quick overview</h1>
<p>This short example uses the simulated Ebola Virus Disease (EVD) outbreak from the package <a href="https://github.com/reconhub/outbreaks"><em>outbreaks</em></a>. It shows how to compute incidence for various time steps and plot the resulting output.</p>
<p>First, we load the data:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/reconhub/outbreaks">outbreaks</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/reconverse/incidence2">incidence2</a></span><span class="op">)</span>

<span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">ebola_sim_clean</span><span class="op">$</span><span class="va">linelist</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span>
<span class="co">#&gt; 'data.frame':    5829 obs. of  11 variables:</span>
<span class="co">#&gt;  $ case_id                : chr  "d1fafd" "53371b" "f5c3d8" "6c286a" ...</span>
<span class="co">#&gt;  $ generation             : int  0 1 1 2 2 0 3 3 2 3 ...</span>
<span class="co">#&gt;  $ date_of_infection      : Date, format: NA "2014-04-09" ...</span>
<span class="co">#&gt;  $ date_of_onset          : Date, format: "2014-04-07" "2014-04-15" ...</span>
<span class="co">#&gt;  $ date_of_hospitalisation: Date, format: "2014-04-17" "2014-04-20" ...</span>
<span class="co">#&gt;  $ date_of_outcome        : Date, format: "2014-04-19" NA ...</span>
<span class="co">#&gt;  $ outcome                : Factor w/ 2 levels "Death","Recover": NA NA 2 1 2 NA 2 1 2 1 ...</span>
<span class="co">#&gt;  $ gender                 : Factor w/ 2 levels "f","m": 1 2 1 1 1 1 1 1 2 2 ...</span>
<span class="co">#&gt;  $ hospital               : Factor w/ 5 levels "Connaught Hospital",..: 2 1 3 NA 3 NA 1 4 3 5 ...</span>
<span class="co">#&gt;  $ lon                    : num  -13.2 -13.2 -13.2 -13.2 -13.2 ...</span>
<span class="co">#&gt;  $ lat                    : num  8.47 8.46 8.48 8.46 8.45 ...</span></code></pre></div>
<div id="computing-and-plotting-incidence" class="section level2">
<h2 class="hasAnchor">
<a href="#computing-and-plotting-incidence" class="anchor"></a>Computing and plotting incidence</h2>
<p>We compute the weekly incidence:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">i_7</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/incidence.html">incidence</a></span><span class="op">(</span><span class="va">dat</span>, date_index <span class="op">=</span> <span class="va">date_of_onset</span>, interval <span class="op">=</span> <span class="fl">7</span><span class="op">)</span>
<span class="va">i_7</span>
<span class="co">#&gt; An incidence object: 56 x 2</span>
<span class="co">#&gt; date range: [2014-04-07 to 2014-04-13] to [2015-04-27 to 2015-05-03]</span>
<span class="co">#&gt; cases: 5829</span>
<span class="co">#&gt; interval: 7 days</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;                  date_index count</span>
<span class="co">#&gt;                    &lt;period&gt; &lt;int&gt;</span>
<span class="co">#&gt;  1 2014-04-07 to 2014-04-13     1</span>
<span class="co">#&gt;  2 2014-04-14 to 2014-04-20     1</span>
<span class="co">#&gt;  3 2014-04-21 to 2014-04-27     5</span>
<span class="co">#&gt;  4 2014-04-28 to 2014-05-04     4</span>
<span class="co">#&gt;  5 2014-05-05 to 2014-05-11    12</span>
<span class="co">#&gt;  6 2014-05-12 to 2014-05-18    17</span>
<span class="co">#&gt;  7 2014-05-19 to 2014-05-25    15</span>
<span class="co">#&gt;  8 2014-05-26 to 2014-06-01    19</span>
<span class="co">#&gt;  9 2014-06-02 to 2014-06-08    23</span>
<span class="co">#&gt; 10 2014-06-09 to 2014-06-15    21</span>
<span class="co">#&gt; # … with 46 more rows</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">i_7</span><span class="op">)</span>
<span class="co">#&gt; date range: [2014-04-07 to 2014-04-13] to [2015-04-27 to 2015-05-03]</span>
<span class="co">#&gt; cases: 5829</span>
<span class="co">#&gt; interval: 7 days</span>
<span class="co">#&gt; timespan: 392 days</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">i_7</span>, color <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-incid7-1.png" style="display: block; margin: auto;"></p>
<p>Notice how specifying the interval as 7 creates weekly intervals with the coverage displayed by date. <code><a href="reference/incidence.html">incidence()</a></code> also allows us to create year-weekly groupings with the default being weeks starting on a Monday (following the ISO 8601 date and time standard). <code><a href="reference/incidence.html">incidence()</a></code> can also compute incidence by specified groups using the <code>groups</code> argument. As an example, below we can compute the weekly incidence by gender and plot in a single, stacked chart:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">iw</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/incidence.html">incidence</a></span><span class="op">(</span><span class="va">dat</span>, interval <span class="op">=</span> <span class="st">"week"</span>, date_index <span class="op">=</span> <span class="va">date_of_onset</span>, groups <span class="op">=</span> <span class="va">gender</span><span class="op">)</span>
<span class="va">iw</span>
<span class="co">#&gt; An incidence object: 109 x 3</span>
<span class="co">#&gt; date range: [2014-W15] to [2015-W18]</span>
<span class="co">#&gt; cases: 5829</span>
<span class="co">#&gt; interval: 1 (Monday) week </span>
<span class="co">#&gt; </span>
<span class="co">#&gt;    date_index gender count</span>
<span class="co">#&gt;        &lt;yrwk&gt; &lt;fct&gt;  &lt;int&gt;</span>
<span class="co">#&gt;  1   2014-W15 f          1</span>
<span class="co">#&gt;  2   2014-W16 m          1</span>
<span class="co">#&gt;  3   2014-W17 f          4</span>
<span class="co">#&gt;  4   2014-W17 m          1</span>
<span class="co">#&gt;  5   2014-W18 f          4</span>
<span class="co">#&gt;  6   2014-W19 f          9</span>
<span class="co">#&gt;  7   2014-W19 m          3</span>
<span class="co">#&gt;  8   2014-W20 f          7</span>
<span class="co">#&gt;  9   2014-W20 m         10</span>
<span class="co">#&gt; 10   2014-W21 f          8</span>
<span class="co">#&gt; # … with 99 more rows</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">iw</span><span class="op">)</span>
<span class="co">#&gt; date range: [2014-W15] to [2015-W18]</span>
<span class="co">#&gt; cases: 5829</span>
<span class="co">#&gt; interval: 1 (Monday) week </span>
<span class="co">#&gt; timespan: 392 days</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; 1 grouped variable</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   gender count</span>
<span class="co">#&gt;   &lt;fct&gt;  &lt;int&gt;</span>
<span class="co">#&gt; 1 f       2934</span>
<span class="co">#&gt; 2 m       2895</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">iw</span>, fill <span class="op">=</span> <span class="st">"gender"</span>, color <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-genderstack-1.png" style="display: block; margin: auto;"></p>
<p>we can also facet our plot (grouping detected automatically):</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/plot.incidence2.html">facet_plot</a></span><span class="op">(</span><span class="va">iw</span>, n.breaks <span class="op">=</span> <span class="fl">3</span>, color <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-genderfacet-1.png" style="display: block; margin: auto;"></p>
<p>It is also possible to group by multiple variables specifying different facets and fills:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">iw2</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/incidence.html">incidence</a></span><span class="op">(</span><span class="va">dat</span>, <span class="va">date_of_onset</span>, interval <span class="op">=</span> <span class="st">"week"</span>,  groups <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">gender</span>, <span class="va">hospital</span><span class="op">)</span><span class="op">)</span>
<span class="va">iw2</span>
<span class="co">#&gt; An incidence object: 601 x 4</span>
<span class="co">#&gt; date range: [2014-W15] to [2015-W18]</span>
<span class="co">#&gt; cases: 5829</span>
<span class="co">#&gt; interval: 1 (Monday) week </span>
<span class="co">#&gt; </span>
<span class="co">#&gt;    date_index gender hospital                                     count</span>
<span class="co">#&gt;        &lt;yrwk&gt; &lt;fct&gt;  &lt;fct&gt;                                        &lt;int&gt;</span>
<span class="co">#&gt;  1   2014-W15 f      Military Hospital                                1</span>
<span class="co">#&gt;  2   2014-W16 m      Connaught Hospital                               1</span>
<span class="co">#&gt;  3   2014-W17 f      &lt;NA&gt;                                             2</span>
<span class="co">#&gt;  4   2014-W17 f      other                                            2</span>
<span class="co">#&gt;  5   2014-W17 m      other                                            1</span>
<span class="co">#&gt;  6   2014-W18 f      &lt;NA&gt;                                             1</span>
<span class="co">#&gt;  7   2014-W18 f      Connaught Hospital                               1</span>
<span class="co">#&gt;  8   2014-W18 f      Princess Christian Maternity Hospital (PCMH)     1</span>
<span class="co">#&gt;  9   2014-W18 f      Rokupa Hospital                                  1</span>
<span class="co">#&gt; 10   2014-W19 f      &lt;NA&gt;                                             1</span>
<span class="co">#&gt; # … with 591 more rows</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">iw2</span><span class="op">)</span>
<span class="co">#&gt; date range: [2014-W15] to [2015-W18]</span>
<span class="co">#&gt; cases: 5829</span>
<span class="co">#&gt; interval: 1 (Monday) week </span>
<span class="co">#&gt; timespan: 392 days</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; 2 grouped variables</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   gender count</span>
<span class="co">#&gt;   &lt;fct&gt;  &lt;int&gt;</span>
<span class="co">#&gt; 1 f       2934</span>
<span class="co">#&gt; 2 m       2895</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   hospital                                     count</span>
<span class="co">#&gt;   &lt;fct&gt;                                        &lt;int&gt;</span>
<span class="co">#&gt; 1 Military Hospital                              889</span>
<span class="co">#&gt; 2 Connaught Hospital                            1737</span>
<span class="co">#&gt; 3 &lt;NA&gt;                                          1456</span>
<span class="co">#&gt; 4 other                                          876</span>
<span class="co">#&gt; 5 Princess Christian Maternity Hospital (PCMH)   420</span>
<span class="co">#&gt; 6 Rokupa Hospital                                451</span>
<span class="fu"><a href="reference/plot.incidence2.html">facet_plot</a></span><span class="op">(</span><span class="va">iw2</span>, facets <span class="op">=</span> <span class="va">gender</span>, fill <span class="op">=</span> <span class="va">hospital</span>, n.breaks <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-genderhospital-1.png" style="display: block; margin: auto;"></p>
</div>
<div id="using-an-alternative-function" class="section level2">
<h2 class="hasAnchor">
<a href="#using-an-alternative-function" class="anchor"></a>Using an alternative function</h2>
<p>The <code><a href="reference/incidence.html">incidence()</a></code> function wraps the date grouping functionality of the <a href="https://www.reconverse.org/grates">grates</a> package, providing an easy to use interface for constructing incidence objects. Sometimes, however, you may want greater flexibility in choosing how you would like to transform your “date” inputs. Using the function <code><a href="reference/build_incidence.html">build_incidence()</a></code>,you can specify the function you wish to apply. We illustrate this below with the excellent <a href="https://cran.r-project.org/package=clock">clock</a> package:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://clock.r-lib.org">clock</a></span><span class="op">)</span>

<span class="co"># create a week function comparable to above approach</span>
<span class="va">isoweek</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://clock.r-lib.org/reference/calendar_narrow.html">calendar_narrow</a></span><span class="op">(</span><span class="fu"><a href="https://clock.r-lib.org/reference/as_iso_year_week_day.html">as_iso_year_week_day</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="st">"week"</span><span class="op">)</span>

<span class="va">clock_week_inci</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="reference/build_incidence.html">build_incidence</a></span><span class="op">(</span>
    <span class="va">dat</span>,
    date_index <span class="op">=</span> <span class="va">date_of_onset</span>,
    groups <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">gender</span>, <span class="va">hospital</span><span class="op">)</span>,
    FUN <span class="op">=</span> <span class="va">isoweek</span>
  <span class="op">)</span>

<span class="va">clock_week_inci</span>
<span class="co">#&gt; An incidence object: 601 x 4</span>
<span class="co">#&gt; date range: [2014-W15] to [2015-W18]</span>
<span class="co">#&gt; cases: 5829</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;    date_index      gender hospital                                     count</span>
<span class="co">#&gt;    &lt;iso_ywd&lt;week&gt;&gt; &lt;fct&gt;  &lt;fct&gt;                                        &lt;int&gt;</span>
<span class="co">#&gt;  1 2014-W15        f      Military Hospital                                1</span>
<span class="co">#&gt;  2 2014-W16        m      Connaught Hospital                               1</span>
<span class="co">#&gt;  3 2014-W17        f      other                                            2</span>
<span class="co">#&gt;  4 2014-W17        f      &lt;NA&gt;                                             2</span>
<span class="co">#&gt;  5 2014-W17        m      other                                            1</span>
<span class="co">#&gt;  6 2014-W18        f      Connaught Hospital                               1</span>
<span class="co">#&gt;  7 2014-W18        f      Princess Christian Maternity Hospital (PCMH)     1</span>
<span class="co">#&gt;  8 2014-W18        f      Rokupa Hospital                                  1</span>
<span class="co">#&gt;  9 2014-W18        f      &lt;NA&gt;                                             1</span>
<span class="co">#&gt; 10 2014-W19        f      Connaught Hospital                               2</span>
<span class="co">#&gt; # … with 591 more rows</span></code></pre></div>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=incidence2">https://​cloud.r-project.org/​package=incidence2</a>
</li>
<li>Browse source code at <br><a href="https://github.com/reconverse/incidence2/">https://​github.com/​reconverse/​incidence2/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/reconverse/incidence2/issues">https://​github.com/​reconverse/​incidence2/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Tim Taylor <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-8587-7113" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://CRAN.R-project.org/package=incidence2"><img src="https://www.r-pkg.org/badges/version/incidence2" alt="CRAN status"></a></li>
<li><a href="https://codecov.io/gh/reconverse/incidence2?branch=master"><img src="https://codecov.io/gh/reconverse/incidence2/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://github.com/reconverse/incidence2/actions"><img src="https://github.com/reconverse/incidence2/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://www.reconverse.org/lifecycle.html#stable"><img src="https://raw.githubusercontent.com/reconverse/reconverse.github.io/master/images/badge-stable.svg"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Tim Taylor.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
